<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link rel="stylesheet"
              href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/default.min.css">
        <style>
         body {
             margin-top: 3%;
         }
         pre {
             font-size: 0.8rem;
             margin: 0 !important;
         }
         span.badge.badge-pill {
             font-size: 0.6rem !important;
         }
        </style>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js"></script>
        
    </head>
    <body>
        <div class="container-fluid">
            <div class="row flex-xl-nowrap">
                <div class="col-md-3 col-xl-2 bd-sidebar">
                    <nav class="bd-links">
                        <div>Sidebar</div>
                    </nav>
                </div>
                <div class="col-12 col-md-9 col-xl-8 bd-content">
                    <div class="jumbotron">
                        <h1 class="display-4">Grapher</h1>
                        <p class="lead">Grapher is a minimal wrapper around <a href="https://d3js.org">D3.js</a> to do line plots, bar plots and <a href="https://www.edwardtufte.com/bboard/q-and-a-fetch-msg?msg_id=0001OR">sparklines.</a></p>
                        </p>
                        <hr class="my-4">
                        <a class="btn btn-primary btn-sm" href="#GetStarted" role="button">Get started</a>
                        <a class="btn btn-dark btn-sm" href="https://github.com/louisdecharson/Grapher" role="button">View code</a>
                    </div>

                    <div id="GetStarted">

                        <h2>Installation</h2>
                        <p>Download the latest version of the <a href="https://github.com/louisdecharson/Grapher/releases/latest">grapher.js</a>. You'll also need <a href="">D3.js</a> to be included before.
                            <pre>
                                <code class="html">
&lt;html>
    &lt;body>
        &lt;script src="/path/to/d3.v5.min.js">&lt;/script>
        &lt;script src="/path/to/grapher.js">&lt;/script>
   &lt;/body>
&lt;/html>
                                </code>
                            </pre>
                        </p>

                        <h2>Create a chart</h2>
                        <p>You <strong>initiate</strong> a chart by creating a <code>Grapher</code> object</p>
                        <pre>
                            <code class="js">
let myGraph = new Grapher(id, options, width, height);
                            </code>
                        </pre>
                        A Grapher object takes four arguments:
                        <ul>
                            <li><code>id</code>: the DOM element that it should be bound to</li>
                            <li><code>options</code>: a JSON with the configuration (see below)</li>
                            <li><code>width</code>: width of the DOM element (optional if the element already has a non-null width)</li>
                            <li><code>height</code>: height of the DOM element (optional if the element already has a non-null height)</li>                    
                        </ul>
                        <p>You <strong>draw</strong> a chart by calling the methode <code>.draw()</code>
                            <code style=display:block;white-space:pre-wrap>
myGraph.draw()
                            </code>
                        </p>

                        <h2 class="mb-4">Examples</h2>
                        
                        <h4>Line chart</h4>
                        <pre>
                            <code class="html">
&lt;html>
    &lt;body>
        &lt;div id="myGraphExample1" style="height:400px;width:auto;">&lt;/div>

        &lt;script src="/path/to/d3.v5.min.js">&lt;/script>
        &lt;script src="/path/to/grapher.js">&lt;/script>

        &lt;script>
        let data = [{'date': '2020-01-01', 'value': 143},
                    {'date': '2020-01-02', 'value': 134},
                    {'date': '2020-01-03', 'value': 115},
                    {'date': '2020-01-04', 'value': 128},
                    {'date': '2020-01-05', 'value': 168}];

        let myGraphExample1 = new Grapher('myGraphExample1',
                                  {"data": data,
                                   "x": {
                                        "name": "date",
                                        "scale": "scaleTime",
                                        "parse": (d) => d3.timeParse('%Y-%m-%d')(d),
                                        "tickFormat": d3.timeFormat("%d/%m/%y"),
                                        "label": "Date"
                                    },
                                    "y": {
                                        "name": "value",
                                        "tickFormat": d3.format('.3s'),
                                        "label": "Glucose"
                                    },
                                    "type": "dotted-line",
                                    });
        myGraphExample1.draw()
        &lt;/script>
   &lt;/body>
&lt;/html>
                            </code>
                        </pre>
                        <div id="myGraphExample1" style="height:400px;width:auto;"></div>
                        <hr>

                        <h4>Bar chart</h4>
                        <pre>
                            <code class="javascript">
        let data = [{"value":3,"Country/Region":"France","date":"2020-01-21T23:00:00.000Z"},
                    {"value":1,"Country/Region":"France","date":"2020-01-22T23:00:00.000Z"},
                    {"value":4,"Country/Region":"France","date":"2020-01-23T23:00:00.000Z"},
                    {"value":7,"Country/Region":"France","date":"2020-01-24T23:00:00.000Z"},
                    {"value":-3,"Country/Region":"Italy","date":"2020-01-21T23:00:00.000Z"},
                    {"value":3,"Country/Region":"Italy","date":"2020-01-22T23:00:00.000Z"},
                    {"value":4,"Country/Region":"Italy","date":"2020-01-23T23:00:00.000Z"},
                    {"value":10,"Country/Region":"Italy","date":"2020-01-24T23:00:00.000Z"}];

        let myGraphExample2 = new Grapher('myGraphExample1',
                                  {"data": data,
                                   "x": {
                                        "name": "date",
                                        "scale": "scaleTime",
                                        "parse": (d) => new Date(d),
                                        "tickFormat": d3.timeFormat("%d/%m/%y"),
                                        "label": "Date"
                                    },
                                    "y": {
                                        "name": "value",
                                    },
                                    "category": {
                                        "name": "Country/Region",
                                    },
                                    "type": "bar",
                                    });
        myGraphExample2.draw()
                            </code>
                        </pre>
                        <div id="myGraphExample2" style="height:400px;width:auto;"></div>
                        <hr>

                        <h4>Sparkline</h4>
                        <pre>
                            <code class="javascript">
        let mySparkline = new Grapher("mySparkline",
                                       {"data": dataSpark,
                                        "x": {
                                            "name": "date",
                                            "parse": (d) => d3.timeParse('%Y-%m-%d')(d),
                                        },
                                        "y": {
                                            "name": "value",
                                            "tickFormat": d3.format('.3s'),
                                            "label": "Glucose"
                                        },
                                        "type": "sparkline",
                                        "sparkline": {
                                            "range": [82, 180]
                                        }
                                       },
                                       150,
                                       25
         );
         mySparkline.draw();
                            </code>
                        </pre>
                        This an example of the famous Edward Tufte's sparkline: <span id="mySparkline"></span>
                        

                        <!-- DOCUMENTATION -->
                        <hr/>
                        <h2>Documentation</h2>
                        <p>Configuration happens in the second argument, <code>options</code>, of the Grapher object. </p>
                        <h4><code>options</code> Object</h4>
                        <p>The <code>options</code> object let you defines the data, axis, type of chart and style options. Below is the full list of options available:</p>
                        <ul>
                            <li><code>data</code>: an array of JSON objects (like in the example above), containing at least the variables for x and y axis.
                                <span class="badge badge-pill badge-warning ml-1 mr-1">required</span>
                            </li>
                            <li><code>x</code>
                                <ul>
                                    <li><code>name</code><span class="badge badge-pill badge-warning ml-1 mr-1">required</span>:
                                        name of the x axis variable in the array <code>data</code>.</li>
                                    <li><code>scale</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>:
                                        a <a href="https://github.com/d3/d3-scale">d3-scale</a>, default is <code>scaleLinear</code>. You'll probably want to use <code>scaleLinear</code> or <code>scaleTime</code>.
                                    </li>
                                    <li><code>tickFormat</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>:
                                        <a href="https://github.com/d3/d3-scale/blob/master/README.md#tickFormat">d3.tickFormat</a>.
                                    </li>
                                    <li><code>parse</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>:
                                        function to parse the variable's data. Usual example is when you are working with dates: <code>(d) => d3.timeParse('%Y-%m-%d')(d)</code>.
                                    </li>
                                    <li><code>label</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>: name of the x-axis label.
                                    </li>
                                    <li><code>domain</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>: domain for the x-axis, default is to use max and min values of data.
                                    </li>
                                </ul>
                            </li>
                            <li><code>y</code>
                                <ul>
                                    <li><code>name</code>
                                        <span class="badge badge-pill badge-warning ml-1 mr-1">required</span>
                                        name of the y axis variable in the array <code>data</code>.
                                    </li>
                                    <li><code>scale</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>:
                                        a <a href="https://github.com/d3/d3-scale">d3-scale</a>, default is <code>scaleLinear</code>.
                                    </li>

                                    <li><code>tickFormat</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>:
                                        <a href="https://github.com/d3/d3-scale/blob/master/README.md#tickFormat">d3.tickFormat</a>.
                                    </li>

                                    <li><code>parse</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>: function to parse the variable's data.
                                    </li>
                                    <li><code>label</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>: name of the y-axis label.
                                    </li>
                                    <li><code>domain</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>: domain for the y-axis, default is to use max and min values of data.
                                    </li>
                                </ul>
                            </li>
                            <li><code>category</code>
                                <div class="text-muted font-italic" style="font-size: 0.8rem;">category is the third dimension to be used when you want to plot multiple lines / bars.</div>
                                <ul>
                                    <li><code>name</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>:
                                        name of the variable in the data array. If not specified, the y-axis will be used for the legend.
                                    </li>
                                    <li><code>parse</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>: function to parse the variable.
                                    </li>
                                </ul>
                            </li>
                            <li><code>type</code><span class="badge badge-pill badge-warning ml-1 mr-1">required</span>: type of plot. Available options are : <code>line</code>, <code>bar</code>, <code>dotted-line</code>, <code>sparkline</code>.
                            </li>
                            <li><code>style</code>
                                <ul>
                                    <li><code>colors</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>:
                                        Array of colors to be used for lines / bars.
                                    </li>
                                    <li><code>barWidth</code>
                                        <span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>
                                        proportion of the width, the bars should use. Default is 0.8 (80%), to have space between each bars.
                                    </li>
                                    <li><code>dotSize</code>
                                        <span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>
                                        size in px of the dots.
                                    </li>
                                    <li><code>grid</code>
                                        <span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>
                                        boolean whether to display a y-axis grid. Default is <code>true</code>.
                                    </li>
                                    <li><code>tooltipColor</code>
                                        <span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>
                                        font-color of text in the tooltip.
                                    </li>
                                    <li><code>tooltipBackgroundColor</code>
                                        <span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>
                                        tooltip's background color.
                                    </li>
                                    <li><code>tooltipOpacity</code>
                                        <span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>
                                        tooltip's opacity.
                                    </li>
                                    <li><code>tooltipLineColor</code>
                                        <span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>
                                        tooltip's vertical line color.
                                    </li>
                                </ul>
                            </li>
                            <li><code>legend</code>
                                <ul>
                                    <li><code>hide</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>: boolean. set to <code>true</code> to hide the legend. Default is <code>false</code>.</li>
                                    <li><code>x</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>: x-position of the legend in the svg.</li>
                                    <li><code>x</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>: y-position of the legend in the svg.</li>
                                    <li><code>interstice</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>: distance between elements of the legend</li>
                                    <li><code>backgroundColor</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>: background color of the legend.</li>
                                    <li><code>opacity</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>: opacity of the legend.</li>
                                </ul>
                            </li>
                            <li><code>download</code>
                                <div class="text-muted font-italic" style="font-size: 0.8rem;">Grapher exposes a <code>downloadData</code> method that will download the data associated as a csv file.</div>
                                <ul>
                                    <li><code>filename</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>: filename to be used for the csv.</li>
                                </ul>
                            </li>
                            <li><code>sparkline</code>
                                <div class="text-muted font-italic" style="font-size: 0.8rem;">From an original idea of <a href="https://www.edwardtufte.com/bboard/q-and-a-fetch-msg?msg_id=0001OR">Edward Tufte.</a></div>
                                <ul>
                                    <li><code>textLastPoint</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>: boolean to display the last value at the end of the plot</li>
                                    <li><code>strokeWidth</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>: stroke width of the spark line</li>
                                    <li><code>lineColor</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>: sparkline's line color.</li>
                                    <li><code>circleColor</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>: last value circle's color</li>
                                    <li><code>textColor</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>: last value's text color.</li>
                                    <li><code>textFontSize</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>: last value's text font size.</li>
                                    <li><code>textFontWeight</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>: last value's text font weight.</li>
                                    <li><code>range</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>: array of min and max values for the "usual" range of values.</li>
                                    <li><code>rangeFillColor</code><span class="badge badge-pill badge-secondary ml-1 mr-1">optional</span>: fill color for the range.</li>
                                </ul>
                            </li>
                        </ul>

                        <hr/>
                        
                        <h4>See also</h4>
                        <p> The library is designed to be minimal with convenient defaults to make a line plot, a bar charts or a sparkline as easy as possible. If you need a more comprehensive library, there are plenty of alternatives: <a href="http://d3js.org/">D3.js</a>, <a href="http://c3js.org">C3.js</a>, <a href="http://plot.ly">plot.ly</a>, <a href="http://chartjs.org">Chart.js</a>.</p>
                        
                    </div>
                </div>
            </div>

            
        </div>

        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.15.0/d3.min.js" integrity="sha256-m0QmIsBXcOMiETRmpT3qg2IQ/i0qazJA2miCHzOmS1Y=" crossorigin="anonymous"></script>
        <script src="./grapher.js"></script>
        <script>
         let dataExample1 = [{'date': '2020-01-01', 'value': 143},
                             {'date': '2020-01-02', 'value': 134},
                             {'date': '2020-01-03', 'value': 115},
                             {'date': '2020-01-04', 'value': 128},
                             {'date': '2020-01-05', 'value': 168}]
         let myGraphExample1 = new Grapher('myGraphExample1',
                                           {"data": dataExample1,
                                            "x": {
                                                "name": "date",
                                                "scale": "scaleTime",
                                                "parse": (d) => d3.timeParse('%Y-%m-%d')(d),
                                                "tickFormat": d3.timeFormat("%d/%m/%y"),
                                                "label": "Date"
                                            },
                                            "y": {
                                                "name": "value",
                                                "tickFormat": d3.format('.3s'),
                                                "label": "Glucose"
                                            },
                                            "type": "dotted-line",
         });
         myGraphExample1.draw()

         let dataExample2 = [{"value":3,"Country/Region":"France","date":"2020-01-21T23:00:00.000Z"},
                             {"value":1,"Country/Region":"France","date":"2020-01-22T23:00:00.000Z"},
                             {"value":4,"Country/Region":"France","date":"2020-01-23T23:00:00.000Z"},
                             {"value":7,"Country/Region":"France","date":"2020-01-24T23:00:00.000Z"},
                             {"value":-3,"Country/Region":"Italy","date":"2020-01-21T23:00:00.000Z"},
                             {"value":3,"Country/Region":"Italy","date":"2020-01-22T23:00:00.000Z"},
                             {"value":4,"Country/Region":"Italy","date":"2020-01-23T23:00:00.000Z"},
                             {"value":10,"Country/Region":"Italy","date":"2020-01-24T23:00:00.000Z"}];

         let myGraphExample2 = new Grapher('myGraphExample2',
                                           {"data": dataExample2,
                                            "x": {
                                                "name": "date",
                                                "scale": "scaleTime",
                                                "parse": (d) => new Date(d),
                                                "tickFormat": d3.timeFormat("%d/%m/%y"),
                                                "label": "Date"
                                            },
                                            "y": {
                                                "name": "value",
                                            },
                                            "category": {
                                                "name": "Country/Region",
                                            },
                                            "type": "bar",
         });
         myGraphExample2.draw()

         let dataSpark = [{'date': '2020-01-01', 'value': 170}, {'date': '2020-01-02', 'value': 134}, {'date': '2020-01-03', 'value': 115}, {'date': '2020-01-04', 'value': 128}, {'date': '2020-01-05', 'value': 168}, {'date': '2020-01-06', 'value': 166}, {'date': '2020-01-07', 'value': 122}, {'date': '2020-01-08', 'value': 81}, {'date': '2020-01-09', 'value': 56}, {'date': '2020-01-10', 'value': 39}, {'date': '2020-01-11', 'value': 97}, {'date': '2020-01-12', 'value': 114}, {'date': '2020-01-13', 'value': 114}, {'date': '2020-01-14', 'value': 130}, {'date': '2020-01-15', 'value': 151}, {'date': '2020-01-16', 'value': 184}, {'date': '2020-01-17', 'value': 148}, {'date': '2020-01-18', 'value': 145}, {'date': '2020-01-19', 'value': 134}, {'date': '2020-01-20', 'value': 145}, {'date': '2020-01-21', 'value': 145}, {'date': '2020-01-22', 'value': 145}, {'date': '2020-01-23', 'value': 143}, {'date': '2020-01-24', 'value': 148}, {'date': '2020-01-25', 'value': 224}, {'date': '2020-01-26', 'value': 181}, {'date': '2020-01-27', 'value': 112}, {'date': '2020-02-01', 'value': 111}, {'date': '2020-02-02', 'value': 129}, {'date': '2020-02-03', 'value': 151}, {'date': '2020-02-04', 'value': 131}, {'date': '2020-02-05', 'value': 131}, {'date': '2020-02-06', 'value': 131}, {'date': '2020-02-07', 'value': 114}, {'date': '2020-02-08', 'value': 112}, {'date': '2020-02-09', 'value': 112}, {'date': '2020-02-10', 'value': 112}, {'date': '2020-02-11', 'value': 124}, {'date': '2020-02-12', 'value': 187}, {'date': '2020-02-13', 'value': 202}, {'date': '2020-02-14', 'value': 200}, {'date': '2020-02-15', 'value': 203}, {'date': '2020-02-16', 'value': 237}, {'date': '2020-02-17', 'value': 263}, {'date': '2020-02-18', 'value': 221}, {'date': '2020-02-19', 'value': 197}, {'date': '2020-02-20', 'value': 184}, {'date': '2020-02-21', 'value': 185}, {'date': '2020-02-22', 'value': 203}, {'date': '2020-02-23', 'value': 290}, {'date': '2020-02-24', 'value': 330}, {'date': '2020-02-25', 'value': 330}, {'date': '2020-02-26', 'value': 226}, {'date': '2020-02-27', 'value': 113}, {'date': '2020-03-01', 'value': 148}, {'date': '2020-03-02', 'value': 169}, {'date': '2020-03-03', 'value': 148}, {'date': '2020-03-04', 'value': 78}, {'date': '2020-03-05', 'value': 96}, {'date': '2020-03-06', 'value': 96}, {'date': '2020-03-07', 'value': 96}, {'date': '2020-03-08', 'value': 77}, {'date': '2020-03-09', 'value': 59}, {'date': '2020-03-10', 'value': 22}, {'date': '2020-03-11', 'value': 22}, {'date': '2020-03-12', 'value': 70}, {'date': '2020-03-13', 'value': 110}, {'date': '2020-03-14', 'value': 128}]

         let mySparkline = new Grapher("mySparkline",
                                       {"data": dataSpark,
                                        "x": {
                                            "name": "date",
                                            "parse": (d) => d3.timeParse('%Y-%m-%d')(d),
                                        },
                                        "y": {
                                            "name": "value",
                                            "tickFormat": d3.format('.3s'),
                                            "label": "Glucose"
                                        },
                                        "type": "sparkline",
                                        "sparkline": {
                                            "range": [82, 180]
                                        }
                                       },
                                       150,
                                       25
         );
         mySparkline.draw();
         
        </script>
        
    </body>
</html>
